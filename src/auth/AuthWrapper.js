import { createContext, useContext, useState } from "react";
import Navbar from "../components/Navbar";
import { RenderRoutes } from "../components/RenderNavigation";



const AuthContext = createContext()
export const AuthData = () => useContext(AuthContext)

export const AuthWrapper = () =>{
    const [user, setUser] = useState({email:"", isAuthentitate: false})

    // gerer l'insciption de l'utilisateur
    const login = (userEmail, password) => {
        return new Promise((resolve, reject) => {

            //ici on compare avec les valuers de la base de donnees

            if(userEmail === "issakha" & password === "password"){
                setUser({email:userEmail, isAuthentitate:true})
                resolve("success")
            }
            else{
                reject("incorrect password or email ")
            }
        })
    }

    // fonction qui gere la deconnection

    const logout = () =>{
        setUser({email:"", isAuthentitate:false})
    }

    return(
        <AuthContext.Provider value={{user, login, logout}}>
            <Navbar />
            <RenderRoutes />
        </AuthContext.Provider>
    )
}