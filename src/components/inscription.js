import React, { useState,useEffect } from 'react';
import { Link } from 'react-router-dom';
import "./inscription.css"
function SignUpForm() {
  const [formData, setFormData] = useState({
    firstName: '',
    lastName: '',
    email: '',
    password: '',
    country: '',
    entreprise: '',
  });
  const [afficheErr, setAficheErr] = useState(false)
  const handleChange = (event) => {
    const { name, value } = event.target;
    setFormData((formData) => ({
      ...formData,
      [name]: value,
    }));
  };

  const handleSubmit = (event) => {
    event.preventDefault()
    // Envoyer les données du formulaire au serveur ici
    const {firstName,lastName,email,country,password}= formData
    if(firstName === '' || lastName === '' || email === '' || country === '' || password === ''){
        setAficheErr(true)
        console.log("no")
    }else{
           fetch('http://http://127.0.0.1:5000/addUser',{
           method:'POST',
           body:formData
         })
         .then(response => response.json())
        .then(json => console.log(json))
        .catch(error => console.log(error))
        console.log("done")
      setAficheErr(false)
      setFormData({
            firstName: '',
        lastName: '',
        email: '',
        password: '',
        country: '',
        entreprise: '',
      })
    }
    
    
  };

  return (
    <form className="form-ins"  onSubmit={handleSubmit} style={{'marginTop':150}}>
    <div className="form-container c1">
            <div>
            <label className="label-ins">
                Prénom :
                <input className="input-ins"
                type="text"
                name="firstName"
                value={formData.firstName}
                onChange={handleChange}
                />
            </label>
        </div>
        <div>
            <label className="label-ins">
                Nom :
                <input className="input-ins"
                type="text"
                name="lastName"
                value={formData.lastName}
                onChange={handleChange}
                />
            </label>
        </div>
    </div>
    <div className='form-container c2'>
            <div>
            <label className="label-ins">
                Email :
                <input className="input-ins"
                type="email"
                name="email"
                value={formData.email}
                onChange={handleChange}
                />
            </label>
        </div>
        <div>
            <label className="label-ins">
                Mot de passe :
                <input className="input-ins"
                type="password"
                name="password"
                value={formData.password}
                onChange={handleChange}
                />
            </label>
        </div>
        
    </div>
    <div className='form-container'>

     
        <div>
        <label className="label-ins">
            Entreprise :
            <input className="input-ins"
            type="text"
            name="entreprise"
            value={formData.entreprise}
            onChange={handleChange}
            />
            </label>
          </div>
          <div>
            <label className="label-ins">
                Pays :
                <input className='input-ins'
                type="text"
                name="country"
                value={formData.country}
                onChange={handleChange}
                />
            </label>
        </div>
    </div>
          <div>
          <button className="button-ins" type="submit">S'inscrire</button>
          </div>
          {afficheErr ? <div>Veuillez entrer tout les champs ...</div>:<div>Inscription Reussie ... <Link to="/login">Se connecter</Link></div>}
        </form>
      );
    }
    
    export default SignUpForm;
    