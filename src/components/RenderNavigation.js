import { Route, Routes } from "react-router-dom";
import { nav } from "./navigation";
import { Link } from "react-router-dom";

import { AuthData } from "../auth/AuthWrapper";

import SignUpForm from "./inscription";


export const RenderRoutes = () => {
    const {user} = AuthData()
    return(
   <div>
        <Routes>
            {nav.map((item, id)=>{
               if(item.isPrivate && user.isAuthenticate){
                    return(<Route key={id} path={item.path} element={item.element}/>)
               }
               else if(!item.isPrivate){
                    return(<Route key={id} path={item.path} element={item.element}/>)
               }else{
                    return true
               }
            
                    
            })}
            <Route path="/inscription" element={<SignUpForm />} />
        </Routes>
   </div>
    )
}

export const RenderMenu = () =>{
    const {user, logout} = AuthData()
    return(
       <div style={{'display':'flex'}}>
            {nav.map( (item,id) => {
                return(
                item.isMenu && <li key={id}> <Link to ={item.path} style={linkStyle}> {item.name} </Link> </li>
                )
            })}
            {user.isAuthenticate ? <li><Link to ="/login" style={linkStyle} onClick={logout}>Se deconnecter</Link></li>:<li><Link to ="/login" style={linkStyle}>Se connecter</Link></li>}
        </div>
    )
    
}

const linkStyle = {
    textDecoration:'none',
    color:'#fff'
}